<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>COA Viewer - EUM</title>
  <!-- OneSignal SDK -->
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];

    // GA4 & Clarity Initialization
    (function () {
      const GA_ID = import.meta.env.VITE_GA_ID;
      const CLARITY_ID = import.meta.env.VITE_CLARITY_ID;

      if (GA_ID && !GA_ID.includes('TODO')) {
        const script = document.createElement('script');
        script.async = true;
        script.src = `https://www.googletagmanager.com/gtag/js?id=${GA_ID}`;
        document.head.appendChild(script);

        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', GA_ID);
      }

      if (CLARITY_ID && !CLARITY_ID.includes('todo')) {
        (function (c, l, a, r, i, t, y) {
          c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
          t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
          y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", CLARITY_ID);
      }

      // Trakpilot / Google Ads Tracking
      (function () {
        function injectScript(t) { const e = document.createElement("script"); e.type = "text/javascript", e.src = t, e.onload = function () { try { otGGTrackEvent(analytics, browser, api, init) } catch (t) { console.error("Trakpilot Error:", t) } }; const c = document.getElementsByTagName("script")[0]; c.parentNode.insertBefore(e, c) }
        injectScript("https://apps.trakpilot.com/customer-events/index.js?v=" + (new Date).getTime());
      })();
    })();
  </script>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>